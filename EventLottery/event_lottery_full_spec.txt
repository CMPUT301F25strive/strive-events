EVENT LOTTERY SYSTEM — COMPLETE PROJECT SPEC (CMPUT 301)
===============================================================

# 0) TECH STACK & PROJECT OVERVIEW
Language: Java (Android Studio)
Architecture: MVVM (ViewModel + LiveData + Repository)
Database: Firebase Firestore + Firebase Storage
Navigation: Jetpack Navigation
UI: XML layouts using Material Design components

# 1) PROBLEM DESCRIPTION
We are designing an Android app that lets community-centre users sign up for limited-capacity events fairly using a lottery system.
Instead of “first come, first served,” entrants join a waiting list while registration is open. When it closes, organizers draw a random subset of entrants to receive invitations. Winners can accept or decline; replacements are drawn automatically. Admins oversee and moderate the platform.

# 2) GOALS & FEATURES
- Fair lottery-based event registration system
- Event creation and management (organizers)
- Waiting list and draw management (system)
- Role distinction (entrant / organizer / admin)
- Notifications for winners and losers
- Poster image upload
- QR code linking to event details
- Optional geolocation verification
- Firebase backend (Firestore + Storage)
- Admin control panel for moderation

# 3) ACTORS
- Entrant: joins waiting lists, accepts/declines invitations, manages profile
- Organizer: creates events, runs draws, sends notifications, exports final lists
- Admin: monitors, removes content, reviews logs

# 4) DATA FLOW SUMMARY
UI → ViewModel → Repository → Firebase (Firestore/Storage)
ViewModels expose LiveData to UI.
Repositories abstract CRUD operations for events, profiles, waiting lists, and invitations.

# 5) ENTITY NAMING & STORAGE
ID fields: eventId, entrantId, organizerId, invitationId
Collection names: events, profiles, waitingLists, invitations, images, logs

# 6) SAMPLE DOCUMENT SCHEMA (Event)
Event {
  id: String,
  name: String,
  description: String,
  venue: String,
  capacity: Int,
  price: Double,
  openAt: Timestamp,
  closeAt: Timestamp,
  organizerId: String,
  posterUrl: String?,
  geoRequired: Boolean,
  status: String ("REG_OPEN" | "REG_CLOSED" | "DRAWN" | "FINALIZED")
}

# 7) ENTITIES & RELATIONSHIPS (CRC SUMMARY)
Event: holds event info (id, name, desc, venue, capacity, price, registration window, organizerId, posterId, geoRequired, computed status)
RegistrationWindow: openAt, closeAt, canValidate(now)
WaitingList: join/leave entrants; track all, selected, cancelled entrants; provides entrant count
EntrantProfile: stores name, email, phone, deviceId, preferences, history; update/delete
OrganizerProfile: stores organizer info/permissions; manages events
Invitation: represents entrant’s invitation (PENDING, ACCEPTED, DECLINED); timestamps, reasons
NotificationLog: record of notifications sent
ImageAsset: stores poster metadata (id, mimeType, storagePath)

Relationships:
- OrganizerProfile 1..* Event
- Event 1..1 RegistrationWindow
- Event 1..* WaitingList
- Event 1..* Invitation
- EntrantProfile 1..* Invitation
- NotificationLog links to EntrantProfile/Organizer/Event/Invitation
- ImageAsset 0..1 ↔ Event

# 8) CONTROLLERS & SERVICES
EventController: create/update events, generate QR codes, fetch/filter event lists, assign poster images
WaitingListController: join/leave waiting list, enforce entrant limits, handle geo restrictions
LotteryController: draw N entrants, create Invitations, redraw replacements, finalize/export results
InvitationController: manage acceptance/decline, trigger replacements, enforce deadlines
NotificationService: send notifications (win/lose, messages), respect opt-outs, log events
QRCodeService: generate/parse event QR codes
GeoService: verify device location (optional)
DeviceIdentityService: generate unique device identity; no password login
AdminController: remove events/profiles/images, review logs, moderate violations
Repositories: EventRepository, ProfileRepository, ImageStorage for persistence (Firebase)

# 9) APP FLOW (SUMMARY)
Entrant:
  Browse events → Join waiting list → Wait for draw → Receive notification → Accept/Decline → View history
Organizer:
  Create event → Publish/QR → Registration closes → Run draw → Send invitations → Monitor → Finalize → Export
Admin:
  Review → Remove inappropriate content → Review notification logs

# 10) LOTTERY LOGIC (SUMMARY)
- Input: Event.capacity = N; WaitingList = entrants
- Randomly select N entrants from waiting list
- Create Invitations (PENDING); notify winners/losers
- When DECLINED/EXPIRED → redraw replacements
- Stop when ACCEPTED count = N
- Finalize and export results (CSV)

# 11) SCREENS & NAVIGATION
Entrant:
  EventList → EventDetails → MyInvitations → MyProfile
Organizer:
  OrganizerDashboard → EventEditor → DrawResults → CSVExport
Admin:
  AdminPanel → LogsView → UserManagement

# 12) USER STORIES (FULL LIST WITH CONTEXT)

User:

US 01.01.01 As an entrant, I want to join the waiting list for a specific event

US 01.01.02 As an entrant, I want to leave the waiting list for a specific event

US 01.01.03 As an entrant, I want to be able to see a list of events that I can join the waiting list for.

US 01.01.04 As an entrant, I want to filter events based on my interests and availability.

US 01.02.01 As an entrant, I want to provide my personal information such as name, email and optional phone number in the app

US 01.02.02 As an entrant I want to update information such as name, email and contact information on my profile

US 01.02.03 As an entrant, I want to have a history of events I have registered for, whether I was selected or not.

US 01.02.04 As an entrant, I want to delete my profile if I no longer wish to use the app.

US 01.04.01 As an entrant I want to receive notification when I am chosen to participate from the waiting list (when I "win" the lottery)

US 01.04.02 As an entrant I want to receive notification of when I am not chosen on the app (when I "lose" the lottery)

US 01.04.03 As an entrant I want to opt out of receiving notifications from organizers and admins

US 01.05.01 As an entrant I want another chance to be chosen from the waiting list if a selected user declines an invitation to sign up.

US 01.05.02 As an entrant I want to be able to accept the invitation to register/sign up when chosen to participate in an event.

US 01.05.03 As an entrant I want to be able to decline an invitation when chosen to participate in an event.

US 01.05.04 As an entrant, I want to know how many total entrants are on the waiting list for an event.

US 01.05.05 As an entrant, I want to be informed about the criteria or guidelines for the lottery selection process.

US 01.06.01 As an entrant I want to view event details within the app by scanning the promotional QR code.

US 01.06.02 As an entrant I want to be able to be sign up for an event by from the event details.

US 01.07.01 As an entrant, I want to be identified by my device, so that I don't have to use a username and password.

Organizer:

US 02.01.01 As an organizer I want to create a new event and generate a unique promotional QR code that links to the event description and event poster in the app.

US 02.01.04 As an organizer, I want to set a registration period.

US 02.02.01 As an organizer I want to view the list of entrants who joined my event waiting list

US 02.02.02 As an organizer I want to see on a map where entrants joined my event waiting list from.

US 02.02.03 As an organizer I want to enable or disable the geolocation requirement for my event.

US 02.03.01 As an organizer I want to OPTIONALLY limit the number of entrants who can join my waiting list.

US 02.04.01 As an organizer I want to upload an event poster to the event details page to provide visual information to entrants.

US 02.04.02 As an organizer I want to update an event poster to provide visual information to entrants.

US 02.05.01 As an organizer I want to send a notification to chosen entrants to sign up for events.

This is the notification that they "won" the lottery.
US 02.05.02 As an organizer I want to set the system to sample a specified number of attendees to register for the event.

US 02.05.03 As an organizer I want to be able to draw a replacement applicant from the pooling system when a previously selected applicant cancels or rejects the invitation.

US 02.06.01 As an organizer I want to view a list of all chosen entrants who are invited to apply.

US 02.06.02 As an organizer I want to see a list of all the cancelled entrants.

US 02.06.03 As an organizer I want to see a final list of entrants who enrolled for the event.

US 02.06.04 As an organizer I want to cancel entrants that did not sign up for the event

US 02.06.05 As an organizer I want to export a final list of entrants who enrolled for the event in CSV format.

US 02.07.01 As an organizer I want to send notifications to all entrants on the waiting list

US 02.07.02 As an organizer I want to send notifications to all selected entrants

US 02.07.03 As an organizer I want to send a notification to all cancelled entrants

Admin:

US 03.01.01 As an administrator, I want to be able to remove events.

US 03.02.01 As an administrator, I want to be able to remove profiles.

US 03.03.01 As an administrator, I want to be able to remove images.

US 03.04.01 As an administrator, I want to be able to browse events.

US 03.05.01 As an administrator, I want to be able to browse profiles.

US 03.06.01 As an administrator, I want to be able to browse images that are uploaded so I can remove them if necessary.

US 03.07.01 As an administrator I want to remove organizers that violate app policy.

US 03.08.01 As an administrator, I want to review logs of all notifications sent to entrants by organizers.

# 13) UI NAVIGATION ORDER
Entrant: Splash → EventList → EventDetails → MyInvitations → MyProfile
Organizer: OrganizerDashboard → EventEditor → DrawResults → CSVExport
Admin: AdminPanel → LogsView → UserManagement

# 14) DEFINITION OF DONE
Feature implemented, functional on emulator, passes basic UI test, and data persists through app restarts.
